<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025 Wrapped</title>

  <style>
    :root{
      --shadow: 0 18px 55px rgba(0,0,0,.28);
      --shadow-strong: 0 28px 85px rgba(0,0,0,.36);
      --glow: 0 0 0 3px rgba(255,255,255,.35), 0 0 40px rgba(255,160,205,.40);
      --ui: rgba(255,255,255,.78);
      --ui2: rgba(255,255,255,.92);
      --ink: rgba(20,20,20,.85);

      /* Wrapped slide motion */
      --durIn: 520ms;
      --durOut: 420ms;
      --easeOut: cubic-bezier(.16, 1, .3, 1);
      --easeIn: cubic-bezier(.7, 0, .84, 0);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      overflow:hidden;
      background:#ffd3e3;
    }

    /* ====== GLOBAL BACKGROUND ====== */
    .bg{
      position:fixed; inset:0;
      background: url("assets/ZeeNYbg.png") center / cover no-repeat;
      transform: translateZ(0);
      z-index:0;
    }
    .bg::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(ellipse at center, rgba(255,255,255,.10) 0%, rgba(255,255,255,.02) 55%, rgba(0,0,0,.10) 100%);
      pointer-events:none;
    }

    /* ====== SECTION SYSTEM ====== */
    .app{
      position:fixed; inset:0;
      z-index:1;
    }
    .section{
      position:absolute; inset:0;
      display:none;
      overflow:hidden;
    }
    .section.active{ display:block; }

    /* ====== GLOBAL NAV ARROWS (between sections) ====== */
    .navArrow{
      position:fixed;
      top:50%;
      transform: translateY(-50%);
      width: 56px;
      height: 56px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.55);
      background: rgba(255,255,255,.18);
      color: white;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 28px;
      cursor:pointer;
      user-select:none;
      transition: transform 120ms ease, background 120ms ease, opacity 120ms ease;
      z-index: 30;
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
    }
    .navArrow:hover{ background: rgba(255,255,255,.28); }
    .navArrow:active{ transform: translateY(-50%) scale(.97); }
    .navArrow.left{ left: 18px; }
    .navArrow.right{ right: 18px; }

    /* ====== INTRO / PLACEHOLDER CARD ====== */
    .intro{
      position:absolute; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
      z-index: 10;
    }
    .intro .card{
      padding: 18px 22px;
      border-radius: 18px;
      background: rgba(255,255,255,.55);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.6);
      box-shadow: 0 14px 50px rgba(0,0,0,.16);
      color: rgba(30,30,30,.88);
      letter-spacing:.2px;
      font-size: 20px;
      font-weight: 700;
      opacity: 0;
      transform: translateY(10px) scale(.98);
      transition: opacity .6s ease, transform .6s ease, filter .6s ease;
      filter: blur(1px);
    }
    .intro.show .card{
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }
    .intro.hide .card{
      opacity: 0;
      transform: translateY(-6px) scale(.99);
      filter: blur(2px);
    }

    /* ====== COMMON COLLAGE STAGE ====== */
    .stage{
      position:absolute; inset:0;
      z-index:2;
    }
    .hint{
      position:absolute;
      left:50%;
      bottom: 16px;
      transform: translateX(-50%);
      z-index:3;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.45);
      border: 1px solid rgba(255,255,255,.55);
      box-shadow: 0 10px 35px rgba(0,0,0,.12);
      color: rgba(40,40,40,.82);
      font-size: 13px;
      backdrop-filter: blur(10px);
      opacity: 0;
      transition: opacity 500ms ease;
      pointer-events:none;
    }
    .ready .hint{ opacity: 1; }

    /* ====== BOARDS (AESTHETICS / GOOD TIMES / LOOKING FORWARD) ====== */
    .board{
      position:absolute;
      display:block;
      height:auto;
      border-radius: 10px;
      box-shadow: var(--shadow);
      cursor:pointer;
      user-select:none;
      transform-origin: 50% 55%;
      transition:
        transform 800ms cubic-bezier(.2,.9,.2,1),
        filter 220ms ease,
        box-shadow 220ms ease,
        opacity 600ms ease;
      will-change: transform;
      filter: saturate(1.02) contrast(1.02);
      opacity: 0;
    }
    .ready .board{ opacity: 1; }

    .board:hover{
      box-shadow: var(--shadow-strong), var(--glow);
      filter: saturate(1.08) contrast(1.06);
    }

    /* ====== MODAL VIEWER (for boards + tweets) ====== */
    .modal{
      position:fixed; inset:0;
      z-index:80;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 24px;
      background: rgba(0,0,0,.50);
      backdrop-filter: blur(4px);
    }
    .modal.open{ display:flex; }

    .modal-inner{
      position:relative;
      width: min(92vw, 1200px);
      height: min(88vh, 820px);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .modal-img{
      max-width: 100%;
      max-height: 100%;
      width:auto;
      height:auto;
      border-radius: 14px;
      box-shadow: 0 30px 95px rgba(0,0,0,.55);
      background: rgba(255,255,255,.02);
    }
    .arrow{
      position:absolute;
      top:50%;
      transform: translateY(-50%);
      width: 54px;
      height: 54px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.55);
      background: rgba(255,255,255,.18);
      color: white;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 26px;
      cursor:pointer;
      user-select:none;
      transition: transform 120ms ease, background 120ms ease, opacity 120ms ease;
    }
    .arrow:hover{ background: rgba(255,255,255,.28); }
    .arrow:active{ transform: translateY(-50%) scale(.97); }
    .arrow.left{ left: -10px; }
    .arrow.right{ right: -10px; }

    /* ====== TITLE PAGE ====== */
    .titleWrap{
      position:absolute; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 24px;
      z-index:2;
    }
    .titleCard{
      width:min(900px, 92vw);
      border-radius: 28px;
      background: rgba(255,255,255,.50);
      border: 1px solid rgba(255,255,255,.62);
      box-shadow: 0 30px 95px rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      padding: 28px 26px;
      text-align:center;
      cursor:pointer;
      user-select:none;
    }
    .titleCard h1{
      margin: 0 0 8px 0;
      font-size: clamp(34px, 4.2vw, 54px);
      letter-spacing: .2px;
      color: rgba(30,30,30,.88);
    }
    .titleCard p{
      margin: 0;
      font-size: 16px;
      color: rgba(40,40,40,.72);
      line-height: 1.45;
    }
    .pill{
      display:inline-block;
      margin-top: 16px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(255,255,255,.65);
      color: rgba(40,40,40,.78);
      font-size: 13px;
    }

    /* ====== TWEETS: POLAROID SHUFFLE ====== */
    .polaroid{
      position:absolute;
      width: min(34vw, 360px);
      max-width: 42vw;
      height:auto;
      border-radius: 14px;
      box-shadow: var(--shadow);
      cursor:pointer;
      user-select:none;
      transform-origin: 50% 60%;
      opacity: 0;
      transition:
        transform 800ms cubic-bezier(.2,.9,.2,1),
        opacity 500ms ease,
        box-shadow 220ms ease,
        filter 220ms ease;
      will-change: transform;
      filter: saturate(1.02) contrast(1.02);
    }
    .ready .polaroid{ opacity: 1; }

    .polaroid:hover{
      box-shadow: var(--shadow-strong), var(--glow);
      filter: saturate(1.08) contrast(1.06);
    }

    /* ====== WRAPPED (TEXT-ONLY SLIDES) ====== */
    .wrappedStage{
      position:absolute; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: clamp(18px, 4vw, 44px);
      z-index:2;
    }
    .wrappedCard{
      width:min(980px, 94vw);
      height:min(680px, 82vh);
      border-radius: 28px;
      background: rgba(255,255,255,.22);
      border: 1px solid rgba(255,255,255,.44);
      box-shadow: 0 30px 95px rgba(0,0,0,.20);
      backdrop-filter: blur(12px);
      overflow:hidden;
      position:relative;
    }

    .wProgress{
      position:absolute;
      top:14px;
      left:16px;
      right:16px;
      display:flex;
      gap:10px;
      z-index:5;
      opacity:.92;
      pointer-events:none;
    }
    .wSeg{
      height:4px;
      flex:1;
      border-radius:999px;
      background: rgba(255,255,255,.28);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.20);
    }
    .wSeg > i{
      display:block;
      height:100%;
      width:0%;
      background: rgba(255,255,255,.92);
      border-radius:999px;
      transform: translateZ(0);
    }

    .wSlide{
      position:absolute;
      inset:0;
      padding: clamp(22px, 4vw, 46px);
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:16px;
      opacity:0;
      transform: translateY(18px) scale(.985);
      pointer-events:none;
    }
    .wSlide.active{
      opacity:1;
      transform: translateY(0) scale(1);
      pointer-events:auto;
    }
    .wSlide.enter{ animation: wIn var(--durIn) var(--easeOut) both; }
    .wSlide.exit{ animation: wOut var(--durOut) var(--easeIn) both; }

    @keyframes wIn{
      from{ opacity:0; transform: translateY(26px) scale(.98); filter: blur(8px); }
      to{ opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
    }
    @keyframes wOut{
      from{ opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
      to{ opacity:0; transform: translateY(-18px) scale(.99); filter: blur(10px); }
    }

    .wKicker{
      font-size: 13px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(30,30,30,.55);
      font-weight: 800;
    }
    .wTitle{
      margin:0;
      font-size: clamp(34px, 4.4vw, 58px);
      line-height: 1.02;
      letter-spacing: -0.02em;
      color: rgba(30,30,30,.88);
    }
    .wSub{
      margin:0;
      font-size: clamp(16px, 2.0vw, 20px);
      line-height: 1.35;
      color: rgba(35,35,35,.68);
      max-width: 70ch;
    }
    .wList{
      margin-top: 8px;
      display:flex;
      flex-direction:column;
      gap:12px;
      max-width: 74ch;
    }
    .wRow{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:14px;
      padding:14px 16px;
      border-radius:18px;
      background: rgba(255,255,255,.30);
      border:1px solid rgba(255,255,255,.48);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.30);
    }
    .wRow .label{
      font-size: clamp(16px, 1.9vw, 20px);
      color: rgba(30,30,30,.82);
      letter-spacing: -0.01em;
      font-weight: 700;
    }
    .wRow .value{
      font-size: clamp(16px, 2.0vw, 20px);
      color: rgba(30,30,30,.66);
      white-space:nowrap;
      font-weight: 700;
    }
    .wBig{
      display:flex;
      flex-direction:column;
      gap:6px;
      padding:18px 18px;
      border-radius:20px;
      background: rgba(255,255,255,.32);
      border:1px solid rgba(255,255,255,.50);
      max-width: 76ch;
    }
    .wBig .num{
      margin:0;
      font-size: clamp(38px, 5.2vw, 64px);
      letter-spacing: -0.03em;
      line-height: 1;
      color: rgba(30,30,30,.90);
    }
    .wBig .desc{
      margin:0;
      font-size: clamp(15px, 1.8vw, 19px);
      line-height: 1.35;
      color: rgba(35,35,35,.66);
      font-weight: 650;
    }

    .wCloud{
      margin-top: 10px;
      display:flex;
      flex-wrap:wrap;
      gap:12px 14px;
      max-width: 78ch;
    }
    .wWord{
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.30);
      border:1px solid rgba(255,255,255,.48);
      color: rgba(30,30,30,.78);
      font-weight: 750;
      user-select:none;
    }
    .cw1{ font-size: clamp(18px, 2.4vw, 26px); }
    .cw2{ font-size: clamp(16px, 2.1vw, 22px); opacity:.92; }
    .cw3{ font-size: clamp(14px, 1.9vw, 20px); opacity:.82; }
    .cw4{ font-size: clamp(13px, 1.6vw, 18px); opacity:.70; }

    .wTapzone{
      position:absolute; inset:0;
      display:grid;
      grid-template-columns: 1fr 1fr;
      z-index:4;
    }
    .wTapzone > button{
      all:unset;
      cursor:pointer;
    }
    .wHint{
      position:absolute;
      left:50%;
      bottom: 16px;
      transform: translateX(-50%);
      z-index:6;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.45);
      border: 1px solid rgba(255,255,255,.55);
      box-shadow: 0 10px 35px rgba(0,0,0,.12);
      color: rgba(40,40,40,.82);
      font-size: 13px;
      backdrop-filter: blur(10px);
      pointer-events:none;
      opacity: 0;
      transition: opacity 500ms ease;
    }
    .ready .wHint{ opacity:1; }

    @media (prefers-reduced-motion: reduce){
      .wSlide.enter, .wSlide.exit{ animation:none !important; }
    }

    /* keep everything within bounds on small screens */
    @media (max-width: 900px){
      .navArrow{ width:52px; height:52px; }
      .polaroid{ width: min(56vw, 360px); max-width: 72vw; }
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <!-- Global section nav -->
  <div class="navArrow left" id="sectionPrev" aria-label="Previous section">‹</div>
  <div class="navArrow right" id="sectionNext" aria-label="Next section">›</div>

  <div class="app" id="app">

    <!-- ===================== 0) TITLE PAGE ===================== -->
    <section class="section active" id="sec-title" data-sec="title">
      <div class="titleWrap">
        <div class="titleCard">
          <h1 id="titleText">2025, wrapped</h1>
          <p id="subtitleText">A scrapbook you can click into.</p>
          <div class="pill">Use the arrows (or ← / →) to move through sections</div>
        </div>
      </div>
    </section>

    <!-- ===================== 1) AESTHETICS ===================== -->
    <section class="section" id="sec-aesthetics" data-sec="aesthetics">
      <div class="intro" id="intro-aesthetics"><div class="card" id="aestheticsIntroText">2025 Aesthetics</div></div>
      <div class="stage" id="stage-aesthetics">
        <img id="aest-rose" class="board" src="assets/ZeeNYBoardCoquette.png" alt="La Vie En Rose board" />
        <img id="aest-noir" class="board" src="assets/ZeeNYBoardVogue.png" alt="Noir board" />
        <img id="aest-burg" class="board" src="assets/ZeeNYBoardBurgundy.png" alt="Burgundy board" />
        <div class="hint">Hover to glow • Click to view • In viewer: ⟵ / ⟶ loops</div>
      </div>
    </section>

    <!-- ===================== 2) THE GOOD TIMES ===================== -->
    <section class="section" id="sec-goodtimes" data-sec="goodtimes">
      <div class="intro" id="intro-good"><div class="card" id="goodIntroText">The good times :)</div></div>
      <div class="stage" id="stage-good">
        <img id="good-left" class="board" src="assets/ZeeNYBoardGoodTimes.png" alt="The Good Times board" />
        <img id="good-right" class="board" src="assets/ZeeNYBoardThoughts.png" alt="Thoughts board" />
        <div class="hint">Hover to glow • Click to view • In viewer: ⟵ / ⟶ loops</div>
      </div>
    </section>

    <!-- ===================== 3) LOOKING FORWARD... ===================== -->
    <section class="section" id="sec-forward" data-sec="lookingforward">
      <div class="intro" id="intro-forward"><div class="card" id="forwardIntroText">Looking forward...</div></div>
      <div class="stage" id="stage-forward">
        <img id="forward-left" class="board" src="assets/ZeeNYBoard2026.png" alt="2026 Looking Forward board" />
        <img id="forward-right" class="board" src="assets/ZeeNYBoardVacation.png" alt="On the map board" />
        <div class="hint">Hover to glow • Click to view • In viewer: ⟵ / ⟶ loops</div>
      </div>
    </section>

    <!-- ===================== 4) TWEETS (POLAROID SHUFFLE) ===================== -->
    <section class="section" id="sec-tweets" data-sec="tweets">
      <div class="intro" id="intro-tweets"><div class="card" id="tweetsIntroText">Top tweets this year</div></div>
      <div class="stage" id="stage-tweets">
        <img class="polaroid" data-i="1" src="assets/ZeeNYPolaroid1.png" alt="Polaroid 1" />
        <img class="polaroid" data-i="2" src="assets/ZeeNYPolaroid2.png" alt="Polaroid 2" />
        <img class="polaroid" data-i="3" src="assets/ZeeNYPolaroid3.png" alt="Polaroid 3" />
        <img class="polaroid" data-i="4" src="assets/ZeeNYPolaroid4.png" alt="Polaroid 4" />
        <img class="polaroid" data-i="5" src="assets/ZeeNYPolaroid5.png" alt="Polaroid 5" />
        <img class="polaroid" data-i="6" src="assets/ZeeNYPolaroid6.png" alt="Polaroid 6" />
        <img class="polaroid" data-i="7" src="assets/ZeeNYPolaroid7.png" alt="Polaroid 7" />
        <img class="polaroid" data-i="8" src="assets/ZeeNYPolaroid8.png" alt="Polaroid 8" />
        <div class="hint">Click a polaroid to view the full tweet • Press R to reshuffle</div>
      </div>
    </section>

    <!-- ===================== 5) WRAPPED RECAP (TEXT ONLY) ===================== -->
    <section class="section" id="sec-recap" data-sec="recap">
      <div class="intro" id="intro-recap"><div class="card" id="recapIntroText">Your 2025 recap</div></div>

      <div class="wrappedStage" id="stage-recap">
        <div class="wrappedCard" aria-label="Wrapped recap slides">
          <div class="wProgress" id="wProgress" aria-hidden="true"></div>

          <div class="wTapzone" aria-hidden="false">
            <button id="wPrev" aria-label="Previous recap slide"></button>
            <button id="wNext" aria-label="Next recap slide"></button>
          </div>

          <div class="wHint">Click left/right (or use ← / →) • Up/Down switches sections</div>
        </div>
      </div>
    </section>

  </div>

  <!-- Modal viewer (reused for boards + tweets) -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-inner" id="modalInner">
      <div class="arrow left" id="modalPrev" aria-label="Previous">‹</div>
      <img class="modal-img" id="modalImg" alt="Full view" />
      <div class="arrow right" id="modalNext" aria-label="Next">›</div>
    </div>
  </div>

  <script>
    /* ============================================================
       CONFIG (customize text + asset ordering here)
    ============================================================ */

    const CONFIG = {
      title: {
        titleText: "2025, wrapped",
        subtitleText: "A scrapbook you can click into."
      },

      // Section order (left/right arrows move between these)
      sections: ["title","aesthetics","goodtimes","lookingforward","tweets","recap"],

      // 3-second placeholder behavior (click right skips immediately; click left returns to previous section)
      placeholderSeconds: 3,

      aesthetics: {
        introText: "2025 Aesthetics",
        items: [
          { id: "aest-rose", src: "assets/ZeeNYBoardCoquette.png" },
          { id: "aest-noir", src: "assets/ZeeNYBoardVogue.png" },
          { id: "aest-burg", src: "assets/ZeeNYBoardBurgundy.png" }
        ]
      },

      goodtimes: {
        introText: "The good times :)",
        items: [
          { id: "good-left",  src: "assets/ZeeNYBoardGoodTimes.png" },
          { id: "good-right", src: "assets/ZeeNYBoardThoughts.png" }
        ]
      },

      lookingforward: {
        introText: "Looking forward...",
        items: [
          { id: "forward-left",  src: "assets/ZeeNYBoard2026.png" },
          { id: "forward-right", src: "assets/ZeeNYBoardVacation.png" }
        ]
      },

      tweets: {
        introText: "Top tweets this year",
        items: [
          { polaroid: "assets/ZeeNYPolaroid1.png", tweet: "assets/ZeeNYTweet1.png" },
          { polaroid: "assets/ZeeNYPolaroid2.png", tweet: "assets/ZeeNYTweet2.png" },
          { polaroid: "assets/ZeeNYPolaroid3.png", tweet: "assets/ZeeNYTweet3.png" },
          { polaroid: "assets/ZeeNYPolaroid4.png", tweet: "assets/ZeeNYTweet4.png" },
          { polaroid: "assets/ZeeNYPolaroid5.png", tweet: "assets/ZeeNYTweet5.png" },
          { polaroid: "assets/ZeeNYPolaroid6.png", tweet: "assets/ZeeNYTweet6.png" },
          { polaroid: "assets/ZeeNYPolaroid7.png", tweet: "assets/ZeeNYTweet7.png" },
          { polaroid: "assets/ZeeNYPolaroid8.png", tweet: "assets/ZeeNYTweet8.png" },
        ]
      },

      recap: {
        introText: "Your 2025 recap",
        slides: [
          {
            kicker: "By the numbers",
            title: "2025, in soft stats.",
            sub: "Not tracked. Just remembered.",
            big: { num: "∞", desc: "Small moments that mattered anyway." },
            rows: [
              { label: "Time zones crossed", value: "1" },
              { label: "Comfortable silences", value: "more than expected" },
              { label: "Check-ins with no pressure", value: "a lot" },
              { label: "Hard conversations survived", value: "all of them" },
              { label: "Times we chose patience", value: "countless" }
            ]
          },
          {
            kicker: "Most replayed moments",
            title: "The ones we kept coming back to.",
            sub: "No rankings needed. Just repeats.",
            rows: [
              { label: "1. Late-night tired calls", value: "REPEAT" },
              { label: "2. Sending something small instead of saying something big", value: "REPEAT" },
              { label: "3. Comfortable silence", value: "REPEAT" },
              { label: "4. Taking space, then coming back", value: "REPEAT" },
              { label: "5. Laughing at nothing", value: "REPEAT" }
            ]
          },
          {
            kicker: "Most used words",
            title: "Unofficial, but accurate.",
            sub: "If our year had a vocabulary.",
            words: [
              { t: "okay", c: "cw1" },
              { t: "tired", c: "cw2" },
              { t: "yeah", c: "cw2" },
              { t: "later", c: "cw3" },
              { t: "i'm here", c: "cw2" },
              { t: "no pressure", c: "cw3" },
              { t: "goodnight", c: "cw3" },
              { t: "miss you", c: "cw2" },
              { t: "❤️", c: "cw1" },
              { t: "lol", c: "cw4" },
              { t: "same", c: "cw4" },
              { t: "safe", c: "cw3" }
            ]
          }
        ]
      }
    };

    /* ============================================================
       SECTION NAV
    ============================================================ */

    const sections = Array.from(document.querySelectorAll(".section"));
    const secByKey = new Map(sections.map(s => [s.dataset.sec, s]));
    const sectionPrev = document.getElementById("sectionPrev");
    const sectionNext = document.getElementById("sectionNext");

    let activeSecIndex = 0;
    let placeholderTimer = null;

    function showSection(key){
      if (placeholderTimer) { clearTimeout(placeholderTimer); placeholderTimer = null; }

      sections.forEach(s => s.classList.remove("active"));
      const sec = secByKey.get(key);
      if (!sec) return;
      sec.classList.add("active");
      document.body.classList.remove("ready");

      if (key === "aesthetics") runPlaceholder("intro-aesthetics", "aestheticsIntroText", CONFIG.aesthetics.introText, () => mountAesthetics());
      else if (key === "goodtimes") runPlaceholder("intro-good", "goodIntroText", CONFIG.goodtimes.introText, () => mountGoodTimes());
      else if (key === "lookingforward") runPlaceholder("intro-forward", "forwardIntroText", CONFIG.lookingforward.introText, () => mountLookingForward());
      else if (key === "tweets") runPlaceholder("intro-tweets", "tweetsIntroText", CONFIG.tweets.introText, () => mountTweets());
      else if (key === "recap") runPlaceholder("intro-recap", "recapIntroText", CONFIG.recap.introText, () => mountRecap());
      else document.body.classList.add("ready");
    }

    function gotoIndex(i){
      activeSecIndex = (i + CONFIG.sections.length) % CONFIG.sections.length;
      showSection(CONFIG.sections[activeSecIndex]);
    }
    function nextSection(){ gotoIndex(activeSecIndex + 1); }
    function prevSection(){ gotoIndex(activeSecIndex - 1); }

    sectionNext.addEventListener("click", () => handleSectionRight());
    sectionPrev.addEventListener("click", () => handleSectionLeft());

    function currentSectionKey(){ return CONFIG.sections[activeSecIndex]; }

    function isPlaceholderShowing(){
      const key = currentSectionKey();
      if (key === "aesthetics") return document.getElementById("intro-aesthetics").style.display !== "none";
      if (key === "goodtimes")  return document.getElementById("intro-good").style.display !== "none";
      if (key === "lookingforward") return document.getElementById("intro-forward").style.display !== "none";
      if (key === "tweets")     return document.getElementById("intro-tweets").style.display !== "none";
      if (key === "recap")      return document.getElementById("intro-recap").style.display !== "none";
      return false;
    }

    function handleSectionRight(){
      const key = currentSectionKey();
      if ((key === "aesthetics" || key === "goodtimes" || key === "lookingforward" || key === "tweets" || key === "recap") && isPlaceholderShowing()){
        skipPlaceholderNow(key);
        return;
      }
      nextSection();
    }

    function handleSectionLeft(){
      const key = currentSectionKey();
      if ((key === "aesthetics" || key === "goodtimes" || key === "lookingforward" || key === "tweets" || key === "recap") && isPlaceholderShowing()){
        prevSection();
        return;
      }
      prevSection();
    }

    /* ============================================================
       PLACEHOLDER / INTRO ANIMATION
    ============================================================ */

    function runPlaceholder(introId, textId, text, onDone){
      const intro = document.getElementById(introId);
      const t = document.getElementById(textId);
      t.textContent = text;

      intro.style.display = "flex";
      intro.classList.remove("hide");
      intro.classList.add("show");

      placeholderTimer = setTimeout(() => {
        intro.classList.add("hide");
      }, Math.max(0, (CONFIG.placeholderSeconds * 1000) - 800));

      placeholderTimer = setTimeout(() => {
        intro.style.display = "none";
        document.body.classList.add("ready");
        onDone();
      }, CONFIG.placeholderSeconds * 1000);
    }

    function skipPlaceholderNow(key){
      if (placeholderTimer) { clearTimeout(placeholderTimer); placeholderTimer = null; }

      if (key === "aesthetics"){
        document.getElementById("intro-aesthetics").style.display = "none";
        document.body.classList.add("ready");
        mountAesthetics(true);
      } else if (key === "goodtimes"){
        document.getElementById("intro-good").style.display = "none";
        document.body.classList.add("ready");
        mountGoodTimes(true);
      } else if (key === "lookingforward"){
        document.getElementById("intro-forward").style.display = "none";
        document.body.classList.add("ready");
        mountLookingForward(true);
      } else if (key === "tweets"){
        document.getElementById("intro-tweets").style.display = "none";
        document.body.classList.add("ready");
        mountTweets(true);
      } else if (key === "recap"){
        document.getElementById("intro-recap").style.display = "none";
        document.body.classList.add("ready");
        mountRecap(true);
      }
    }

    /* ============================================================
       MODAL VIEWER (boards + tweets)
    ============================================================ */

    const modal = document.getElementById("modal");
    const modalInner = document.getElementById("modalInner");
    const modalImg = document.getElementById("modalImg");
    const modalPrev = document.getElementById("modalPrev");
    const modalNext = document.getElementById("modalNext");

    let modalList = [];
    let modalIndex = 0;

    function openModal(list, index){
      modalList = list.slice();
      modalIndex = (index + modalList.length) % modalList.length;
      modalImg.src = modalList[modalIndex];
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
    }

    function closeModal(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden", "true");
    }

    function modalGo(delta){
      modalIndex = (modalIndex + delta + modalList.length) % modalList.length;
      modalImg.src = modalList[modalIndex];
    }

    modalPrev.addEventListener("click", (e) => { e.stopPropagation(); modalGo(-1); });
    modalNext.addEventListener("click", (e) => { e.stopPropagation(); modalGo(1); });

    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    modalInner.addEventListener("click", (e) => {
      const isArrow = (e.target === modalPrev || e.target === modalNext);
      const isImage = (e.target === modalImg);
      if (!isArrow && !isImage) closeModal();
    });

    window.addEventListener("keydown", (e) => {
      if (!modal.classList.contains("open")) return;
      if (e.key === "ArrowLeft") modalGo(-1);
      if (e.key === "ArrowRight") modalGo(1);
      if (e.key === "Escape") closeModal();
    });

    /* ============================================================
       AESTHETICS LAYOUT + INTERACTIONS
    ============================================================ */

    let aestheticsMounted = false;

    function mountAesthetics(force = false){
      if (aestheticsMounted && !force) return;
      aestheticsMounted = true;

      const rose = document.getElementById("aest-rose");
      const noir = document.getElementById("aest-noir");
      const burg = document.getElementById("aest-burg");

      rose.style.width = "min(56vw, 820px)";
      noir.style.width = "min(60vw, 880px)";
      burg.style.width = "min(52vw, 760px)";

      rose.style.left = "5vw";
      rose.style.top  = "20vh";
      noir.style.left = "30vw";
      noir.style.top  = "8vh";
      burg.style.left = "58vw";
      burg.style.top  = "18vh";

      rose.style.transform = "translate3d(-40px,120px,0) scale(.86) rotate(-10deg)";
      noir.style.transform = "translate3d(0px,120px,0) scale(.86) rotate(3deg)";
      burg.style.transform = "translate3d(40px,120px,0) scale(.86) rotate(12deg)";

      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          rose.style.transform = "translate3d(0,0,0) scale(1) rotate(-10deg)";
          noir.style.transform = "translate3d(0,0,0) scale(1) rotate(3deg)";
          burg.style.transform = "translate3d(0,0,0) scale(1) rotate(12deg)";
        });
      });

      const sources = CONFIG.aesthetics.items.map(x => x.src);
      CONFIG.aesthetics.items.forEach((item, idx) => {
        const el = document.getElementById(item.id);
        el.onclick = () => openModal(sources, idx);
      });
    }

    /* ============================================================
       GOOD TIMES LAYOUT + INTERACTIONS
    ============================================================ */

    let goodMounted = false;

    function mountGoodTimes(force = false){
      if (goodMounted && !force) return;
      goodMounted = true;

      const left = document.getElementById("good-left");
      const right = document.getElementById("good-right");

      left.style.width = "min(62vw, 980px)";
      right.style.width = "min(56vw, 880px)";

      left.style.left = "6vw";
      left.style.top  = "14vh";
      right.style.left = "52vw";
      right.style.top  = "10vh";

      left.style.transform  = "translate3d(-40px,120px,0) scale(.86) rotate(-6deg)";
      right.style.transform = "translate3d(40px,120px,0) scale(.86) rotate(6deg)";

      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          left.style.transform  = "translate3d(0,0,0) scale(1) rotate(-6deg)";
          right.style.transform = "translate3d(0,0,0) scale(1) rotate(6deg)";
        });
      });

      const sources = CONFIG.goodtimes.items.map(x => x.src);
      CONFIG.goodtimes.items.forEach((item, idx) => {
        const el = document.getElementById(item.id);
        el.onclick = () => openModal(sources, idx);
      });
    }

    /* ============================================================
       LOOKING FORWARD LAYOUT + INTERACTIONS
    ============================================================ */

    let forwardMounted = false;

    function mountLookingForward(force = false){
      if (forwardMounted && !force) return;
      forwardMounted = true;

      const left = document.getElementById("forward-left");
      const right = document.getElementById("forward-right");

      // Two-board vibe (same feel as good times, slightly more airy)
      left.style.width = "min(58vw, 920px)";
      right.style.width = "min(58vw, 920px)";

      // In-bounds with tasteful overlap
      left.style.left = "6vw";
      left.style.top  = "12vh";
      right.style.left = "50vw";
      right.style.top  = "14vh";

      left.style.transform  = "translate3d(-40px,120px,0) scale(.86) rotate(-7deg)";
      right.style.transform = "translate3d(40px,120px,0) scale(.86) rotate(7deg)";

      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          left.style.transform  = "translate3d(0,0,0) scale(1) rotate(-7deg)";
          right.style.transform = "translate3d(0,0,0) scale(1) rotate(7deg)";
        });
      });

      const sources = CONFIG.lookingforward.items.map(x => x.src); // left->right ordering
      CONFIG.lookingforward.items.forEach((item, idx) => {
        const el = document.getElementById(item.id);
        el.onclick = () => openModal(sources, idx);
      });
    }

    /* ============================================================
       TWEETS: POLAROID SHUFFLE + CLICK TO FULL TWEET
    ============================================================ */

    let tweetsMounted = false;

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function mountTweets(force = false){
      if (tweetsMounted && !force) return;
      tweetsMounted = true;
      shufflePolaroids(true);

      const polaroids = Array.from(document.querySelectorAll("#stage-tweets .polaroid"));
      polaroids.forEach((p) => {
        const i = Number(p.getAttribute("data-i")) || 1;
        p.onclick = () => {
          const tweetSources = CONFIG.tweets.items.map(x => x.tweet);
          openModal(tweetSources, i - 1);
        };
      });
    }

    function shufflePolaroids(firstTime = false){
      const stage = document.getElementById("stage-tweets");
      const polaroids = Array.from(stage.querySelectorAll(".polaroid"));

      const W = window.innerWidth;
      const H = window.innerHeight;

      const padX = 80;
      const padY = 90;

      polaroids.forEach((p, idx) => {
        if (firstTime){
          p.style.opacity = "0";
          p.style.transform = `translate3d(${W/2}px, ${H/2}px, 0) scale(.65) rotate(0deg)`;
        }

        const x = rand(padX, W - padX);
        const y = rand(padY, H - padY);
        const r = rand(-16, 16);
        const s = rand(0.92, 1.06);

        p.style.left = x + "px";
        p.style.top  = y + "px";

        const settle = `translate3d(-50%, -50%, 0) scale(${s}) rotate(${r}deg)`;

        setTimeout(() => {
          p.style.opacity = "1";
          p.style.transform = settle;
          p.style.zIndex = String(10 + idx);
        }, firstTime ? (120 + idx * 90) : (idx * 40));
      });
    }

    window.addEventListener("keydown", (e) => {
      if (modal.classList.contains("open")) return;
      if (currentSectionKey() !== "tweets") return;
      if (e.key.toLowerCase() === "r") shufflePolaroids(false);
    });

    window.addEventListener("resize", () => {
      if (currentSectionKey() === "tweets") shufflePolaroids(false);
    });

    /* ============================================================
       RECAP (TEXT SLIDES) — wrapped-ish transitions
    ============================================================ */

    const wProgress = document.getElementById("wProgress");
    const wPrev = document.getElementById("wPrev");
    const wNext = document.getElementById("wNext");
    const recapCard = document.querySelector(".wrappedCard");

    let recapMounted = false;
    let wSlides = [];
    let wIndex = 0;
    let wBusy = false;

    function mountRecap(force = false){
      if (recapMounted && !force) return;
      recapMounted = true;

      wSlides.forEach(s => s.remove());
      wSlides = [];
      wIndex = 0;
      wBusy = false;

      buildWProgress(CONFIG.recap.slides.length);

      CONFIG.recap.slides.forEach(sl => {
        const node = makeWSlide(sl);
        recapCard.appendChild(node);
        wSlides.push(node);
      });

      if (wSlides[0]){
        wSlides[0].classList.add("active","enter");
        setTimeout(()=>wSlides[0].classList.remove("enter"), 650);
        setWProgress(0);
      }
    }

    function buildWProgress(n){
      wProgress.innerHTML = "";
      for (let i=0;i<n;i++){
        const seg = document.createElement("div");
        seg.className = "wSeg";
        const fill = document.createElement("i");
        seg.appendChild(fill);
        wProgress.appendChild(seg);
      }
    }

    function setWProgress(activeIdx){
      const fills = [...wProgress.querySelectorAll(".wSeg > i")];
      fills.forEach((f,i)=>{
        f.style.width = (i <= activeIdx) ? "100%" : "0%";
        f.style.opacity = (i <= activeIdx) ? "1" : ".65";
      });
    }

    function prefersReducedMotion(){
      return window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    }

    function wGo(nextIdx){
      if (wBusy) return;
      if (!wSlides.length) return;

      if (nextIdx < 0) nextIdx = wSlides.length - 1;
      if (nextIdx >= wSlides.length) nextIdx = 0;
      if (nextIdx === wIndex) return;

      wBusy = true;

      const cur = wSlides[wIndex];
      const nxt = wSlides[nextIdx];

      cur.classList.remove("enter");
      cur.classList.add("exit");
      cur.classList.remove("active");

      nxt.classList.remove("exit");
      nxt.classList.add("active","enter");

      setWProgress(nextIdx);

      const outMs = prefersReducedMotion() ? 0 : 460;
      const inMs  = prefersReducedMotion() ? 0 : 620;

      setTimeout(()=>cur.classList.remove("exit"), outMs);
      setTimeout(()=>{
        nxt.classList.remove("enter");
        wIndex = nextIdx;
        wBusy = false;
      }, Math.max(outMs, inMs));
    }

    function wNextSlide(){ wGo(wIndex + 1); }
    function wPrevSlide(){ wGo(wIndex - 1); }

    wNext.addEventListener("click", wNextSlide);
    wPrev.addEventListener("click", wPrevSlide);

    function makeWSlide(d){
      const s = document.createElement("section");
      s.className = "wSlide";

      const kicker = document.createElement("div");
      kicker.className = "wKicker";
      kicker.textContent = d.kicker || "";
      s.appendChild(kicker);

      const title = document.createElement("h1");
      title.className = "wTitle";
      title.textContent = d.title || "";
      s.appendChild(title);

      const sub = document.createElement("p");
      sub.className = "wSub";
      sub.textContent = d.sub || "";
      s.appendChild(sub);

      if (d.big){
        const big = document.createElement("div");
        big.className = "wBig";
        const num = document.createElement("p");
        num.className = "num";
        num.textContent = d.big.num || "";
        const desc = document.createElement("p");
        desc.className = "desc";
        desc.textContent = d.big.desc || "";
        big.appendChild(num);
        big.appendChild(desc);
        s.appendChild(big);
      }

      if (Array.isArray(d.rows)){
        const list = document.createElement("div");
        list.className = "wList";
        d.rows.forEach(r=>{
          const row = document.createElement("div");
          row.className = "wRow";
          const l = document.createElement("div");
          l.className = "label";
          l.textContent = r.label;
          const v = document.createElement("div");
          v.className = "value";
          v.textContent = r.value;
          row.appendChild(l);
          row.appendChild(v);
          list.appendChild(row);
        });
        s.appendChild(list);
      }

      if (Array.isArray(d.words)){
        const cloud = document.createElement("div");
        cloud.className = "wCloud";
        d.words.forEach(w=>{
          const chip = document.createElement("span");
          chip.className = `wWord ${w.c || "cw3"}`;
          chip.textContent = w.t;
          cloud.appendChild(chip);
        });
        s.appendChild(cloud);
      }

      return s;
    }

    /* ============================================================
       KEYBOARD HANDLING
       - Recap section: Left/Right = slides; Up/Down = sections
       - Other sections: Left/Right = sections
    ============================================================ */
    window.addEventListener("keydown", (e) => {
      if (modal.classList.contains("open")) return;

      const key = currentSectionKey();

      if (key === "recap" && !isPlaceholderShowing()){
        if (e.key === "ArrowRight"){ e.preventDefault(); wNextSlide(); return; }
        if (e.key === "ArrowLeft"){ e.preventDefault(); wPrevSlide(); return; }
        if (e.key === "ArrowUp"){ e.preventDefault(); prevSection(); return; }
        if (e.key === "ArrowDown"){ e.preventDefault(); nextSection(); return; }
        return;
      }

      if (e.key === "ArrowRight") handleSectionRight();
      if (e.key === "ArrowLeft") handleSectionLeft();
    }, { passive:false });

    /* ============================================================
       TITLE TEXT SETUP
    ============================================================ */
    document.getElementById("titleText").textContent = CONFIG.title.titleText;
    document.getElementById("subtitleText").textContent = CONFIG.title.subtitleText;

    /* ============================================================
       START APP
    ============================================================ */
    showSection(CONFIG.sections[0]);

    document.querySelector(".titleCard").addEventListener("click", () => nextSection());
  </script>
</body>
</html>
